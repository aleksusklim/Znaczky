### Znaczek #D:

Наконец, выкладываю прогу, которую я случайно сделал, после того, как вручную потратил часа три вот эти коллажи:  
<http://klimaleksus.narod.ru/Files/R/mirror_1.jpg> ([png](http://klimaleksus.narod.ru/Files/R/mirror_1.png)) и <http://klimaleksus.narod.ru/Files/R/mirror_2.jpg> ([png](http://klimaleksus.narod.ru/Files/R/mirror_2.png))  
До кучи, это ещё и двусторонняя печать (которая всё равно прошла криво, но ладно).

Я понял, что существующие инструменты, по крайней мере из тех, что я нашёл – не подходят под мою задачу, потому что мне важна стыковка и совмещение сторон картинок, а не абстрактное манипулирование слоями.

Также мне не подойдут и готовые коллаж-решения, ведь мне важен не вид решётки, а именно размеры картинок – чтобы выжать максимально без искажений (нет, задачу о рюкзаке решать не хочу).

В итоге у меня получилась вот такая вот программа, которая как бы уже не нужна, я же расставил всё в PaintToolSAI, но уверен, что в будущем она будет экономить мне примерно два часа раз в год:  
<http://klimaleksus.narod.ru/Files/4/CLGv1.rar>  
Скриншоты не покажу. А вообще, её бы хорошо переписать на HTML5, но чё-т я совершенно не желаю впариваться в рисование по канвасу (там ещё с поворотами и отражениями разбираться…)

Давайте я лучше справку сюда копирну! Прямо текстом, без спойлера:  
(писать её было дольше, чем код программы; вернее, дольше было продумывать все назначения клавиш…)

---

CLG v1

Это программа для быстрого создания коллажей из набора картинок.  
Она ориентирована на чёткие границы с выравниванием изображений, для печати и вырезания из бумаги.  
Результат сглаживается и может содержать ошибку в один пиксель с любого края, поэтому программа не подходит для очень точного и неискажённого размещения схем.

Управление необычно, но удобно, когда вы привыкните к нему!

Для начала общий принцип работы:  
– Экран это рабочая область. Прокрутки нет.  
– Задаётся глобальный масштаб, целое число: во сколько раз пиксель на экране должен быть увеличен в итоговом полотне, по умолчанию 8 (то есть всё будет выглядеть в восемь раз меньшим, чем на самом деле).  
– Картинки можно стыковать друг с другом в прямоугольные области. Их можно подгонять под размер друг друга.  
– Картинки можно объединять попарно. Потом объединять и сами группы, получая несколько слепленных картинок, которые управляются как одна (что особенно полезно при подгонке размеров).  
– Редактирование: поворот, отражение, неравномерное масштабирование.  
– Картинкам задаётся две границы: внутренняя и внешняя. Причём внешняя фактически измеряется в тех единицах, которые в глобальном масштабе. То есть например внешняя граница «2» – это два экранных пикселя, не зависимо от текущего масштаба при сохранении.  
– Внутренняя граница измеряется в итоговых пикселях, и будет «замазана» самим изображением, чтобы сгладить ему края. Также, внутренняя граница не изменится при относительном масштабировании картинок (и особенно, групп).  
– В заголовке окна показывается три числа: масштаб, внешняя и внутренняя границы. При наведении на изображение – его итоговые размеры.  
– История действий для «отмены», а также в качестве резервных копий, собирается в папке «\undo\*.txt», содержимое которой автоматически не очищается. Удаляйте их вручную через некоторое время.  
– Вместо правой кнопки мыши можно зажать Ctrl и пользоваться левой; также, клавиши Page Up и Page Down действуют как колёсико мышки.  

Основные операции:  
– Пробел = добавить новую картинку. Выберите файл в диалоговом окне, и он будет вставлен на экран.  
– Перетаскивание левой кнопкой мыши = двигать и стыковать картинки. Нельзя наложить два изображения  друг на друга.  
– Ctrl+Enter = сменить масштаб. Обычно это число от 1 до 16. Экран будет обновлён, но никаких коррекций в расположение картинок не вносится.  
– Enter = сохранить итоговый результат в файл. В имени в диалоговом окне будет результирующее разрешение коллажа. Если оно слишком большое, сохранение не удастся (зависит от доступной видеопамяти).  
– Двойной щелчок левой кнопкой мыши на пустом месте = выравнивание всех картинок так, чтобы они не накладывались и не выходили за экран.  
– Левый щелчок по картинке с зажатой клавишей Delete = удаление.  
– Вращение колёсика мыши с наведением на картинку = изменение её размера. Для ускорения операции, зажмите правую или левую (быстрее) кнопки мыши.  
– Ctrl+Z = отмена последней важной операции. Не все действия хранят историю отмен, а также после отмены все картинки будут разгруппированы. И вообще, отмена нужна для крайних случаев, потому что большинство действий можно вернуть и другими способами.  
– Ctrl+Y (или Ctrl+Shift+Z) = возврат отменённой операции. Действия, сделанные после отмены, не затирают историю, а встают в её конец.  
– Shift+Enter = сохранение состояния рабочей области в текстовый файл с координатами и путями к изображениям, чтобы потом можно было легко воссоздать расположение и продолжить работу над коллажем.  
– Shift+Пробел = загрузка состояния, сохранённого по предыдущей команде, либо открытие документа из истории отмен (папка \undo\, ориентируйтесь на дату файла). Пути к картинкам могут быть изменены вручную – это позволяет быстро собрать новые коллажи с тем же расположением изображений.  

Редактирование:  
– Ctrl+Пробел = установка внешней и внутренней границы, они действуют сразу для всех картинок. Коррекция в текущее расположение не вносится.  
– Перетаскивание правой кнопкой мыши между двумя стыкующимися картинками = подгонка размера первой под вторую. Эта операция учитывает свободное пространство вокруг, и увеличит изображение настолько, насколько это возможно.  
– Как предыдущее, но с зажатым Shift = подгонка только одной стороны, без равномерного расширения картинки. Это искажает её, но помогает занять оставшееся свободное место или сделать изображения одинаковыми по размеру.  
– Как любое из двух предыдущих, но повторно (когда картинки уже одинаковые по стыкающейся стороне) = группировка. Группа ведёт себя как картинка, но при изменении размера, пустоты между сгруппированными внешними границами будут искажены относительно обычных внешних границ.  
– Перетаскивание левой кнопкой мыши с зажатым Shift = правка размеров картинок, изменение краёв. Не сохраняет соотношение сторон, зато как бы двигает границу между стыкующимися изображениями.  
– Двойной щелчок правой кнопкой мыши = разгруппировывает объединённые, или восстанавливает масштаб одиночных картинок.  
– Двойной щелчок левой по картинке – восстановить исходное соотношение сторон.  
– Нажатие Alt (но из-за ошибки движка, эффект проявится только после следующего действия; для большей ясности нажимайте Alt с уже нажатой левой кнопкой мыши) = отображать вместо картинок цветные прямоугольники. Цвет зависит от масштаба каждого изображения относительно его исходного размера: зелёный – нормально, красный – слишком растянуто, синий – слишком уменьшено. Неравномерные искажения показываются градиентом; стрелки указывают направление привязки (для двойного левого щелчка по пустому месту).  
– Рисование правой кнопкой мыши с зажатым Shift = добавление прямоугольника-пустышки, который ведёт себя как картинка. Иногда удобно для дополнительных ограничений или привязок.  
– Правый щёлчок по картинке с зажатым Delete = создание привязок по её краям, чтобы получить как бы рамку заданного размера. По ней можно будет выравнивать.  
– Правый щёлчок с зажатым Delete по пустому месту = удаление всех привязок, созданных по предыдущей команде.  
– Левый или правый щелчок по картинке с зажатым Alt = отражение изображения по горизонтали или вертикали. Группы также отражаются.  
– Как предыдущее, но дополнительно с зажатым Shift = вращение картинки против или по часовой стрелке. Изображение остаётся в своём левом верхнем углу.  

Быстро приступить к работе:  
– Нажмите пробел и добавьте картинки. Не делайте их большими принудительно, сначала подрегулируйте глобальный масштаб (Ctrl+Enter).  
– Стыкуйте их друг к другу (левое перетаскивание).  
– Чтобы «приложить» одну картинку к другой по стороне – перетащите одну из них на другую правой кнопкой мыши (они должны быть уже состыкованы).  
– Если что-то куда-то не помещается – уменьшите размер колёсиком, а потом уже пользуйтесь правым перетаскиванием.  
– Чтобы задать рамку, например формат бумаги, – откройте шаблон с нужными размерностями (например приложенный «A4.png» файл), потом кликните по картинке правой кнопкой мыши с зажатым Delete, и затем – левой с Delete, чтобы удалить середину.  
– Чтобы выровнять несколько картинок по нескольким другим картинкам – сначала сгруппируйте их (дважды перетащив правой кнопкой мыши примыкающие стороны), а потом сопоставляйте группы тем же способом.  
– Последняя картинка обычно не влезает в неравномерное место. Для этого зажмите Shift и повторите правое перетаскивание, чтобы форсировать размеры сторон раздельно.  
– Нажмите Enter для сохранения результата. Если не получается, то сгруппируйте все картинки, уменьшите их и попробуйте снова.  
– Обычно вам не нужны границы между картинками. Если же вы планируете нарезать распечатанный коллаж, и тем более если это подборка наклеек или трафаретов – «внутренняя граница» поможет сделать расстояние между изображениями, которое будет не жалко отрезать – потому что в нём никакой ценной части нет.  
– Для использования «внешней» границы придётся чётко задать глобальный масштаб и не менять его; также постарайтесь не масштабировать сгруппированные изображения, ведь там внешняя граница уже не сохранит размер.  
– Чтобы сделать зеркальную подборку двух коллажей для двусторонней печати – сгруппируйте все картинки в один прямоугольник и отразите его. Затем разгруппируйте всё и отразите каждое изображение отдельно.  
– Чтобы быстро поменять одну из картинок, можно просто добавить новую, удалить старую, и всунув туда – расширить до краёв.  

---

Во-от. Соберу-ка в одном месте, все существующие коллажи, которые я когда-либо делал, чтобы показать, что в такой программе я нуждался уже ни один раз:

<http://klimaleksus.narod.ru/Files/R/print_1.jpg> ([png](http://klimaleksus.narod.ru/Files/R/print_1.png)) и <http://klimaleksus.narod.ru/Files/R/print_2.jpg> ([png](http://klimaleksus.narod.ru/Files/R/print_2.png))  
<http://klimaleksus.narod.ru/Files/R/vad_1.jpg> ([png](http://klimaleksus.narod.ru/Files/R/vad_1.png)) и <http://klimaleksus.narod.ru/Files/R/vad_2.jpg> ([png](http://klimaleksus.narod.ru/Files/R/vad_2.png))  
<http://klimaleksus.narod.ru/Files/R/print_3.png> и <http://klimaleksus.narod.ru/Files/R/print_4.png>  
<http://klimaleksus.narod.ru/Files/R/print_5.jpg> ([png](http://klimaleksus.narod.ru/Files/R/print_5.png)) и <http://klimaleksus.narod.ru/Files/R/print_6.jpg> ([png](http://klimaleksus.narod.ru/Files/R/print_6.png))  
<http://klimaleksus.narod.ru/Files/R/midcup.jpg> ([png](http://klimaleksus.narod.ru/Files/R/midcup.png)) и <http://klimaleksus.narod.ru/Files/R/croc.jpg> ([png](http://klimaleksus.narod.ru/Files/R/croc.png))  
<http://klimaleksus.narod.ru/Files/R/cards_1.jpg> ([png](http://klimaleksus.narod.ru/Files/R/cards_1.png)) и <http://klimaleksus.narod.ru/Files/R/cards_2.jpg> ([png](http://klimaleksus.narod.ru/Files/R/cards_2.png))  

Хотя, для вон тех вон равномерных сеток из картинок, я уже делал однажды программку:  
<http://klimaleksus.narod.ru/Files/4/stamp.rar>  
– простая вещь, принимающая итоговые размерности, и набор пронумерованных изображений.  
Собирает .bmp на единый холст, очень помогала автоматически размещать подборки кучи мелких, и иногда даже больших.

_\*UPD\*_

И как же я забыл показать нарезанные версии?

<http://klimaleksus.narod.ru/Files/R/stuff_1.jpg>  
<http://klimaleksus.narod.ru/Files/R/stuff_2.jpg>  
<http://klimaleksus.narod.ru/Files/R/stuff_3.jpg>  
<http://klimaleksus.narod.ru/Files/R/stuff_4.jpg>  
<http://klimaleksus.narod.ru/Files/R/stuff_5.jpg>  

На первой картинке самое интересное – жестяные крышки для консервных банок.  
Во-первых, я распечатал коллаж на «самоклейке» – фотобумага, которую можно разлепить, и обратная сторона будет липкой, чтобы делать наклейки.  
Во-вторых, я заламинировал два таких листа – то есть ещё до разлепления, приложил их рубашками внутрь, и ламинация прошла как двусторонняя A4, фактически ламинируя каждую с одной стороны.  
В-третьих, я всё это нарезал на кружочки.  
В-четвёртых, набрал кучу одинаковых металлических крышек, и разрезал каждую – убрал загнутый край с резинкой, и сделав надрезы внутрь для загибов.  
В-пятых, налепил по центру все картинки (главное разлеплять самоклейку, а не отрывать ламинацию), и загнул лепестки на лицевую сторону изображений.  
Теперь у них гладкий, не колючий край, сама картинка выглядит как пластиковая и влитая (потому что держится не только клеем, но ещё и хорошо обжата), а обратная сторона – ну как крышка от банки, ещё на изгиб щёлкает.  

Остальные картинки – также либо наклейки, либо ламинации.  
Та, что в начале поста – печаталась на двусторонней фотобумаге, и тоже была заламинирована (фоток нет, но выглядело бы также, как другие).

Кстати, в тему:

<http://klimaleksus.narod.ru/Files/S/BADGE_spyro_origins_by_icedragonhawk.png>  
– чтобы сделать такой размытый край, нужно накладывать изображение само на себя с разным размером на прозрачном фоне:  
<http://klimaleksus.narod.ru/Files/S/ImageExpander.png>

В то время я даже написал для этого специальную программу:  
<http://klimaleksus.narod.ru/Files/S/ImageExpander.rar>  
– перетаскивайте .bmp с белым фоном на исполняемый файл.

Для SWV, и я наверное уже где-то говорил об этом, я сделал реализацию того же на GML, с несколькими дополнительными опциями:  
<http://klimaleksus.narod.ru/Files/4/expander.rar>

А «кстати» – потому что мой CLG v1, о котором идёт речь – тоже поддерживает этот эффект!  
Правда, картинка не расползается вширь, а становится меньше к центру.  
Полностью поддерживается .png прозрачность, и подходит для обработки и единственной картинки (задайте «внутреннюю границу»), хотя и предназначена лишь для коллажей.

P.S.  
_ZNACZKY!!_  
<http://klimaleksus.narod.ru/Files/R/0/badges_1.jpg>  
<http://klimaleksus.narod.ru/Files/R/0/badges_2.jpg>  
<http://klimaleksus.narod.ru/Files/R/0/badges_3.jpg>  

---

[Назад](./)
